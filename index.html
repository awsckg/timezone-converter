<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>World Clock & Time Zone Converter</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <!-- Your existing HTML structure remains the same until the script section -->
    
    <script>
    // World Clock Update Function
    function updateWorldClocks() {
        const now = new Date();
        const options = {
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit',
            hour12: true
        };
        
        const timeZones = {
            'london-time': 'Europe/London',
            'newyork-time': 'America/New_York',
            'tokyo-time': 'Asia/Tokyo',
            'mumbai-time': 'Asia/Kolkata',
            'sydney-time': 'Australia/Sydney',
            'singapore-time': 'Asia/Singapore'
        };

        for (const [elementId, timezone] of Object.entries(timeZones)) {
            const time = new Date(now.toLocaleString('en-US', { timeZone: timezone }));
            document.getElementById(elementId).textContent = time.toLocaleString('en-US', options);
        }
    }

    // Update clocks every second
    setInterval(updateWorldClocks, 1000);
    updateWorldClocks();

    // Time Zone Converter Function
    function convertTime() {
        // Get input values
        const startTime = document.getElementById('startTime').value;
        const endTime = document.getElementById('endTime').value;
        const selectedZone = document.getElementById('inputTimeZone').value;

        // Validate inputs
        if (!startTime || !endTime) {
            alert('Please select both start and end times');
            return;
        }

        // Create date objects
        const start = new Date(startTime);
        const end = new Date(endTime);

        if (end < start) {
            alert('End time cannot be earlier than start time');
            return;
        }

        // Calculate duration
        const duration = end - start;
        const hours = Math.floor(duration / (1000 * 60 * 60));
        const minutes = Math.floor((duration % (1000 * 60 * 60)) / (1000 * 60));

        // Define time zones for conversion
        const timeZones = {
            'IST': 'Asia/Kolkata',
            'UTC': 'UTC',
            'PST': 'America/Los_Angeles',
            'UK': 'Europe/London',
            'AEST': 'Australia/Sydney',
            'SGT': 'Asia/Singapore',
            'CET': 'Europe/Paris',
            'EET': 'Europe/Helsinki',
            'WET': 'Europe/Lisbon'
        };

        // Start building output HTML
        let outputHtml = `
            <div class="time-segment">
                <h3>Duration</h3>
                <p><strong>Total Duration:</strong> ${hours}h ${minutes}m</p>
            </div>
        `;

        // Convert times for each time zone
        for (const [zoneName, zoneValue] of Object.entries(timeZones)) {
            try {
                const startInZone = new Date(start.toLocaleString('en-US', { timeZone: zoneValue }));
                const endInZone = new Date(end.toLocaleString('en-US', { timeZone: zoneValue }));

                const options = {
                    timeZone: zoneValue,
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: true
                };

                outputHtml += `
                    <div class="time-segment">
                        <h3>${zoneName} (${zoneValue})</h3>
                        <p><strong>Start:</strong> ${startInZone.toLocaleString('en-US', options)}</p>
                        <p><strong>End:</strong> ${endInZone.toLocaleString('en-US', options)}</p>
                    </div>
                `;
            } catch (error) {
                console.error(`Error converting time for ${zoneName}: ${error}`);
            }
        }

        // Display results
        document.getElementById('results').innerHTML = outputHtml;
    }
    </script>
</body>
</html>
